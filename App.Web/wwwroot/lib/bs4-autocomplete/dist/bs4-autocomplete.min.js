!function(p){var n,r={treshold:4,maximumItems:5,highlightTyped:!0,highlightClass:"text-primary",fetchTime:500};function c(e,t,o){var a;if(!o.compareFn&&o.highlightTyped){var n=t.label.toLowerCase().indexOf(e.toLowerCase());a=t.label.substring(0,n)+'<span class="'+o.highlightClass+'">'+t.label.substring(n,n+e.length)+"</span>"+t.label.substring(n+e.length,t.label.length)}else a=t.label;return a='<span class="autocomplete-item">'+a+"</span>"}function l(t,o){var e=t.val();if(!o.source||e.length<o.treshold)return t.dropdown("hide"),0;var a=t.next();a.html("");for(var n=0,r=0,l=o.source;r<l.length;r++){var s=l[r];if(o.compareFn?o.compareFn(e,s):0<=s.label.toLowerCase().indexOf(e.toLowerCase())){var d=p('<button type="button" class="dropdown-item ${opts.labelClass ? `${opts.labelClass}` : ``}" data-value="${entry.value}" />'),i=c(e,s,o);if(d.append(i),o.onRenderItem&&o.onRenderItem(s,d),a.append(d),o.maximumItems&&++n>=o.maximumItems)break}}return t.next().find(".dropdown-item").click(function(){var e=p(this).find("span.autocomplete-item").first().text();t.val(e),o.onSelectItem&&o.onSelectItem({value:p(this).data("value"),label:e},t)}),a.children().length}p.fn.autocomplete=function(e){var t={};p.extend(t,r,e);var o=p(this);o.parent().removeClass("dropdown"),o.removeAttr("data-toggle"),o.removeClass("dropdown-toggle"),o.parent().find(".dropdown-menu").remove(),o.dropdown("dispose"),o.parent().addClass("dropdown"),o.attr("data-toggle","dropdown"),o.addClass("dropdown-toggle");var a=p('<div class="dropdown-menu" ></div>');return t.dropdownClass&&a.addClass(t.dropdownClass),o.after(a),o.dropdown(t.dropdownOptions),this.off("click.autocomplete").click("click.autocomplete",function(e){0==l(o,t)&&(e.stopPropagation(),o.dropdown("hide"))}),this.off("keyup.autocomplete").keyup("keyup.autocomplete",function(){t.fetchSource?(n&&clearTimeout(n),n=setTimeout(function(){var e=o.val();e.length<t.treshold?o.dropdown("hide"):t.fetchSource(e).then(function(e){t.source=e,0<l(o,t)?o.dropdown("show"):o.click()})},t.fetchTime)):0<l(o,t)?o.dropdown("show"):o.click()}),this}}(jQuery);